from django.views.generic import ListView, DetailView, CreateView, TemplateView
from django.contrib import messages
from django.urls import reverse_lazy
from catalog.forms import ContactForm, ProductForm
from catalog.models import Product


class HomeView(ListView):
    """–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞.

    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–ª–∞—Å—Å `ListView` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
    –í—ã–ø–æ–ª–Ω—è–µ—Ç ORM-–∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö,
    —Å–æ—Ä—Ç–∏—Ä—É—è –∏—Ö –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–Ω–æ–≤—ã–µ ‚Äî –ø–µ—Ä–≤—ã–º–∏).

    –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
    - –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å –ø–æ–º–æ—â—å—é ORM-–∑–∞–ø—Ä–æ—Å–∞ `Product.objects.select_related("category")`
      –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–æ–¥–∏–Ω SQL-–∑–∞–ø—Ä–æ—Å —Å –ø–æ–¥–≥—Ä—É–∑–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π).
    - –ü—Ä–æ–≤–æ–¥–∏—Ç –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –≤—ã–≤–æ–¥ (`paginate_by = 8`).
    - –í—ã–≤–æ–¥–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª—å (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏).
    - –†–µ–Ω–¥–µ—Ä–∏—Ç —à–∞–±–ª–æ–Ω `home.html` –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ–±—ä–µ–∫—Ç `page_obj`
      –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–∏ –≤ —à–∞–±–ª–æ–Ω–µ.

    –ê—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∞—Å—Å–∞:
        model (Model): –º–æ–¥–µ–ª—å, —Å –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (`Product`).
        template_name (str): –ø—É—Ç—å –∫ —à–∞–±–ª–æ–Ω—É, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂—ë–Ω.
        context_object_name (str): –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –¥–æ—Å—Ç—É–ø–Ω–æ–π –≤ —à–∞–±–ª–æ–Ω–µ.
        paginate_by (int): –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.
        ordering (list[str]): –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (–ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è, —É–±—ã–≤–∞–Ω–∏–µ).

    –ö–æ–Ω—Ç–µ–∫—Å—Ç:
        page_obj (Page): –æ–±—ä–µ–∫—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —Ç–æ–≤–∞—Ä–∞–º–∏."""

    model = Product
    template_name = "home.html"
    context_object_name = "page_obj"
    paginate_by = 8
    ordering = ["-created_at"]

    def get_queryset(self):
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π queryset —Å –ø–æ–¥–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏."""
        return Product.objects.select_related("category").order_by("-created_at")

    def get_context_data(self, **kwargs):
        """–î–æ–±–∞–≤–ª—è–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 —Ç–æ–≤–∞—Ä–æ–≤ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)."""
        context = super().get_context_data(**kwargs)
        latest_products = Product.objects.order_by("-created_at")[:5]
        print("üÜï –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:")
        for p in latest_products:
            print(f"- {p.name} ({p.price} ‚ÇΩ)")
        return context


class ContactsView(TemplateView):
    """–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–ö–æ–Ω—Ç–∞–∫—Ç—ã" —Å —Ñ–æ—Ä–º–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏.

    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `TemplateView`, –ø–æ—Å–∫–æ–ª—å–∫—É —à–∞–±–ª–æ–Ω –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π,
    –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–æ—Ä–º—É `ContactForm`, –∫–æ—Ç–æ—Ä—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å.

    –ü–æ–≤–µ–¥–µ–Ω–∏–µ:
    - –ü—Ä–∏ `GET`-–∑–∞–ø—Ä–æ—Å–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º–æ–π.
    - –ü—Ä–∏ `POST`-–∑–∞–ø—Ä–æ—Å–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º—É –∏,
      –µ—Å–ª–∏ –≤—Å—ë —É—Å–ø–µ—à–Ω–æ, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ (–±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î).

    –ê—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∞—Å—Å–∞:
        template_name (str): —à–∞–±–ª–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`contacts.html`).

    –ö–æ–Ω—Ç–µ–∫—Å—Ç:
        form (ContactForm): —Ñ–æ—Ä–º–∞ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
        success_message (str | None): —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö.

    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        HttpResponse: –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω —Å —Ñ–æ—Ä–º–æ–π –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ–º."""

    template_name = "contacts.html"

    def get_context_data(self, **kwargs):
        """–î–æ–±–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º—É –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–∏ –ø–µ—Ä–≤–∏—á–Ω–æ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã."""
        context = super().get_context_data(**kwargs)
        context["form"] = ContactForm()
        context["success_message"] = None
        return context

    def post(self, request, *args, **kwargs):
        """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç POST-–∑–∞–ø—Ä–æ—Å, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç."""
        form = ContactForm(request.POST)
        success_message = None

        if form.is_valid():
            name = form.cleaned_data["name"]
            phone = form.cleaned_data["phone"]
            message = form.cleaned_data["message"]

            success_message = (
                f"‚úÖ –°–ø–∞—Å–∏–±–æ, {name}! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É {phone}."
            )
            form = ContactForm()  # –æ—á–∏—â–∞–µ–º –ø–æ–ª—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

        context = {"form": form, "success_message": success_message}
        return self.render_to_response(context)


class ProductDetailView(DetailView):
    """–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞.

    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `DetailView`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –æ–±—ä–µ–∫—Ç –ø–æ –µ–≥–æ –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É (pk).
    –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç –≤ —à–∞–±–ª–æ–Ω `product_detail.html`.

    –ê—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∞—Å—Å–∞:
        model (Model): –º–æ–¥–µ–ª—å —Ç–æ–≤–∞—Ä–∞ (`Product`).
        template_name (str): —à–∞–±–ª–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
        context_object_name (str): –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ –≤ —à–∞–±–ª–æ–Ω–µ (`product`).

    –ö–æ–Ω—Ç–µ–∫—Å—Ç:
        product (Product): –æ–±—ä–µ–∫—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞, –¥–æ—Å—Ç—É–ø–Ω—ã–π –≤ —à–∞–±–ª–æ–Ω–µ.

    –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —à–∞–±–ª–æ–Ω–µ:
        {{ product.name }}
        {{ product.description }}
        <img src="{{ product.image.url }}" alt="{{ product.name }}">"""

    model = Product
    template_name = "product_detail.html"
    context_object_name = "product"


class AddProductView(CreateView):
    """–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É.

    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `CreateView` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–æ–¥–µ–ª–∏ `Product`.
    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–π
    –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `django.contrib.messages`.

    –ü–æ–≤–µ–¥–µ–Ω–∏–µ:
    - –ü—Ä–∏ `GET` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—É—Å—Ç—É—é —Ñ–æ—Ä–º—É.
    - –ü—Ä–∏ `POST` ‚Äî —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç `Product` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

    –ê—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∞—Å—Å–∞:
        model (Model): –º–æ–¥–µ–ª—å `Product`.
        form_class (Form): —Ñ–æ—Ä–º–∞ `ProductForm` –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö.
        template_name (str): —à–∞–±–ª–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`add_product.html`).
        success_url (str): URL –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è.

    –ö–æ–Ω—Ç–µ–∫—Å—Ç:
        form (ProductForm): —Ñ–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞.

    –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:
        ‚úÖ –¢–æ–≤–∞—Ä '–ù–æ—É—Ç–±—É–∫ ASUS VivoBook' —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!"""

    model = Product
    form_class = ProductForm
    template_name = "add_product.html"
    success_url = reverse_lazy("home")

    def form_valid(self, form):
        """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–≤–∞—Ä –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ."""
        product = form.save()
        messages.success(self.request, f"‚úÖ –¢–æ–≤–∞—Ä '{product.name}' —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!")
        return super().form_valid(form)

    def form_invalid(self, form):
        """–í—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –µ—Å–ª–∏ —Ñ–æ—Ä–º–∞ –Ω–µ –ø—Ä–æ—à–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—é."""
        messages.error(
            self.request,
            "‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.",
        )
        return super().form_invalid(form)


# FBV version of contollers
# from django.shortcuts import render, get_object_or_404, redirect
# from django.contrib import messages
# from django.core.paginator import Paginator
# from catalog.forms import ContactForm, ProductForm
# from catalog.models import Product
#
#
# def home_view(request):
#     """–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
#     –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–∑ –ë–î –∏
#     –ø–µ—Ä–µ–¥–∞—ë—Ç –∏—Ö –≤ —à–∞–±–ª–æ–Ω –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.
#     –¢–∞–∫–∂–µ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏."""
#     products = Product.objects.select_related("category").all().order_by("-created_at")
#     # latest_products = products[:5]
#     #
#     # print("üÜï –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã:")
#     # for p in latest_products:
#     #     print(f"- {p.name} ({p.price} ‚ÇΩ)")
#     #
#     # return render(request, "home.html", {"products": products})
#     paginator = Paginator(products, 8)  # –ø–æ 8 —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
#     page_number = request.GET.get("page")
#     page_obj = paginator.get_page(page_number)
#
#     return render(request, "home.html", {"page_obj": page_obj})
#
#
# def contacts_view(request):
#     """–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (view) –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–ö–æ–Ω—Ç–∞–∫—Ç—ã" —Å —Ñ–æ—Ä–º–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏.
#     –ü–æ–≤–µ–¥–µ–Ω–∏–µ:
#     - –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å GET ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—É—Å—Ç—É—é —Ñ–æ—Ä–º—É.
#     - –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å POST ‚Üí –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã.
#     - –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç success_message –∏ –æ—á–∏—â–∞–µ—Ç –ø–æ–ª—è.
#     - –î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ email).
#     –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
#         request (HttpRequest): –æ–±—ä–µ–∫—Ç –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞.
#     –ö–æ–Ω—Ç–µ–∫—Å—Ç:
#         form (ContactForm): —ç–∫–∑–µ–º–ø–ª—è—Ä —Ñ–æ—Ä–º—ã (–ø—É—Å—Ç–æ–π –∏–ª–∏ —Å –≤–≤–µ–¥—ë–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏).
#         success_message (str | None): —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã
#             –∏–ª–∏ None, –µ—Å–ª–∏ —Ñ–æ—Ä–º–∞ –Ω–µ –±—ã–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏.
#     –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
#         HttpResponse: –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω contacts.html —Å —Ñ–æ—Ä–º–æ–π –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ–º."""
#     success_message = None
#
#     if request.method == "POST":
#         form = ContactForm(request.POST)
#         if form.is_valid():
#             # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ email)
#             name = form.cleaned_data["name"]
#             phone = form.cleaned_data["phone"]
#             message = form.cleaned_data["message"]
#
#             # –î–ª—è –ø—Ä–∏–º–µ—Ä–∞: –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
#             success_message = (
#                 f"‚úÖ –°–ø–∞—Å–∏–±–æ, {name}! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É {phone}."
#             )
#             form = ContactForm()  # –æ—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
#     else:
#         form = ContactForm()
#
#     return render(
#         request, "contacts.html", {"form": form, "success_message": success_message}
#     )
#
#
# def product_detail_view(request, pk):
#     """–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞.
#     –ü—Ä–∏–Ω–∏–º–∞–µ—Ç pk, –ø–æ–ª—É—á–∞–µ—Ç –æ–±—ä–µ–∫—Ç Product –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
#     –∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç —à–∞–±–ª–æ–Ω —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π."""
#     product = get_object_or_404(Product, pk=pk)
#     return render(request, "product_detail.html", {"product": product})
#
#
# def add_product_view(request):
#     """–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞.
#     –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç GET (—Ñ–æ—Ä–º–∞) –∏ POST (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)."""
#     if request.method == "POST":
#         form = ProductForm(request.POST, request.FILES)
#         if form.is_valid():
#             product = form.save()
#             messages.success(request, f"‚úÖ –¢–æ–≤–∞—Ä '{product.name}' —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!")
#             return redirect("home")
#         else:
#             messages.error(
#                 request, "‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ."
#             )
#     else:
#         form = ProductForm()
#
#     return render(request, "add_product.html", {"form": form})
