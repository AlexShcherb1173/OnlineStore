{% load static %}

<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container">
    <a class="navbar-brand fw-bold" href="{% url 'catalog:home' %}">SkyStore</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <!-- üîπ –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Å—ã–ª–∫–∏ -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}"
             href="{% url 'catalog:home' %}">–ö–∞—Ç–∞–ª–æ–≥</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'contacts' %}active{% endif %}"
             href="{% url 'catalog:contacts' %}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.namespace == 'blog' %}active{% endif %}"
             href="{% url 'blog:post_list' %}">–ë–ª–æ–≥</a>
        </li>
      </ul>

      <!-- üîπ –ë–ª–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-center">
        {% if user.is_authenticated %}
           <a href="{% url 'users:profile_edit' %}" class="text-white text-decoration-none me-3">
           <i class="fas fa-user-circle me-1"></i> {{ user.email }}
           </a>
           <a href="{% url 'logout' %}" class="btn btn-outline-light btn-sm">–í—ã–π—Ç–∏</a>
        {% else %}
            <a href="{% url 'login' %}" class="btn btn-outline-light btn-sm">–í–æ–π—Ç–∏</a>
        {% endif %}
            {% if user.avatar %}
              <img src="{{ user.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä" class="rounded-circle me-2" width="32" height="32">
            {% endif %}
            <span class="text-white small">{{ user.email }}</span>
          </li>
          <li class="nav-item">
            <a class="btn btn-outline-light btn-sm" href="{% url 'users:logout' %}">
              <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
            </a>
          </li>
        {% else %}
          <li class="nav-item me-2">
            <a class="btn btn-outline-light btn-sm" href="{% url 'users:login' %}">
              <i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏
            </a>
          </li>
          <li class="nav-item">
            <a class="btn btn-light btn-sm text-primary" href="{% url 'users:register' %}">
              <i class="fas fa-user-plus"></i> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
            </a>
          </li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>